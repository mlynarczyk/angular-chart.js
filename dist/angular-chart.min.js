!function(t){"use strict";"object"==typeof exports?module.exports=t("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js")):"function"==typeof define&&define.amd?define(["angular","chart"],t):t(angular,Chart)}(function(t,e){"use strict";function r(){var r={},n={Chart:e,getOptions:function(e){var n=e&&r[e]||{};return t.extend({},r,n)}};this.setOptions=function(e,n){return n?void(r[e]=t.extend(r[e]||{},n)):(n=e,void(r=t.extend(r,n)))},this.$get=function(){return n}}function n(r,n){function o(t,e){return t&&e&&t.length&&e.length?Array.isArray(t[0])?t.length===e.length&&t.every(function(t,r){return t.length===e[r].length}):e.reduce(i,0)>0?t.length===e.length:!1:!1}function i(t,e){return t+e}function c(e,r,n,a){var o=null;return function(i){var c=r.getPointsAtEvent||r.getBarsAtEvent||r.getSegmentsAtEvent;if(c){var l=c.call(r,i);(a===!1||t.equals(o,l)===!1)&&(o=l,e[n](l,i),e.$apply())}}}function l(n,a){for(var o=t.copy(a.colours||r.getOptions(n).colours||e.defaults.global.colours);o.length<a.data.length;)o.push(a.getColour());return o.map(u)}function u(t){return"object"==typeof t&&null!==t?t:"string"==typeof t&&"#"===t[0]?h(g(t.substr(1))):s()}function s(){var t=[f(0,255),f(0,255),f(0,255)];return h(t)}function h(t){return{fillColor:d(t,.2),strokeColor:d(t,1),pointColor:d(t,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:d(t,.8)}}function f(t,e){return Math.floor(Math.random()*(e-t+1))+t}function d(t,e){return a?"rgb("+t.join(",")+")":"rgba("+t.concat(e).join(",")+")"}function g(t){var e=parseInt(t,16),r=e>>16&255,n=e>>8&255,a=255&e;return[r,n,a]}function p(e,r,n,a,o){return{previousPeriodData:e,labels:r,datasets:n.map(function(e,r){return t.extend({},o[r],{label:a[r],data:e})})}}function v(e,r,n,a){return r.map(function(r,o){return t.extend({},a[o],{previousPeriodData:e,label:r,value:n[o],color:a[o].strokeColor,highlight:a[o].pointHighlightStroke})})}function y(t,e){var r=t.parent(),n=r.find("chart-legend"),a="<chart-legend>"+e.generateLegend()+"</chart-legend>";n.length?n.replaceWith(a):r.append(a)}function C(t,e,r,n){Array.isArray(r.data[0])?t.datasets.forEach(function(t,r){(t.points||t.bars).forEach(function(t,n){t.value=e[r][n]})}):t.segments.forEach(function(t,r){t.value=e[r]}),t.update(),r.$emit("update",t),r.legend&&"false"!==r.legend&&y(n,t)}function b(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function m(n,a){var o=t.extend({},e.defaults.global,r.getOptions(n),a.options);return o.responsive}return function(e){return{restrict:"CA",scope:{data:"=?",previousPeriodData:"=?",labels:"=?",options:"=?",series:"=?",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=?",hover:"=?",chartData:"=?",chartPreviousPeriodData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColours:"=?",chartLegend:"@",chartClick:"=?",chartHover:"=?"},link:function(i,u){function h(t,e){i.$watch(t,function(t){"undefined"!=typeof t&&(i[e]=t)})}function f(r,n){if(!b(r)&&!t.equals(r,n)){var a=e||i.chartType;a&&(w&&w.destroy(),d(a))}}function d(e){if(m(e,i)&&0===u[0].clientHeight&&0===D.clientHeight)return n(function(){d(e)},50,!1);if(i.data&&i.data.length){i.getColour="function"==typeof i.getColour?i.getColour:s,i.colours=l(e,i);var a=u[0],o=a.getContext("2d"),h=Array.isArray(i.data[0])?p(i.previousPeriodData,i.labels,i.data,i.series||[],i.colours):v(i.previousPeriodData,i.labels,i.data,i.colours),f=t.extend({},r.getOptions(e),i.options);w=new r.Chart(o)[e](h,f),i.$emit("create",w),a.onclick=i.click?c(i,w,"click",!1):t.noop,a.onmousemove=i.hover?c(i,w,"hover",!0):t.noop,i.legend&&"false"!==i.legend&&y(u,w)}}function g(t){if("undefined"!=typeof console&&"test"!==r.getOptions().env){var e="function"==typeof console.warn?console.warn:console.log;i[t]&&e.call(console,'"%s" is deprecated and will be removed in a future version. Please use "chart-%s" instead.',t,t)}}var w,D=document.createElement("div");D.className="chart-container",u.replaceWith(D),D.appendChild(u[0]),a&&window.G_vmlCanvasManager.initElement(u[0]),["data","previousPeriodData","labels","options","series","colours","legend","click","hover"].forEach(g),h("chartData","data"),h("chartPreviousPeriodData","previousPeriodData"),h("chartLabels","labels"),h("chartOptions","options"),h("chartSeries","series"),h("chartColours","colours"),h("chartLegend","legend"),h("chartClick","click"),h("chartHover","hover"),h("chartPreviousPeriod"),i.$watch("data",function(t,r){if(t&&t.length&&(!Array.isArray(t[0])||t[0].length)){var n=e||i.chartType;if(n){if(w){if(o(t,r))return C(w,t,i,u);w.destroy()}d(n)}}},!0),i.$watch("series",f,!0),i.$watch("labels",f,!0),i.$watch("previousPeriodData",f,!0),i.$watch("options",f,!0),i.$watch("colours",f,!0),i.$watch("chartType",function(e,r){b(e)||t.equals(e,r)||(w&&w.destroy(),d(e))}),i.$on("$destroy",function(){w&&w.destroy()})}}}}e.defaults.global.responsive=!0,e.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",e.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var a="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return a&&(e.defaults.global.animation=!1),t.module("chart.js",[]).provider("ChartJs",r).factory("ChartJsFactory",["ChartJs","$timeout",n]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("Line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("Bar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("PolarArea")}])});
//# sourceMappingURL=angular-chart.min.js.map
