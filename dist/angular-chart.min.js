!function(t){"use strict";"object"==typeof exports?module.exports=t("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js")):"function"==typeof define&&define.amd?define(["angular","chart"],t):t(angular,Chart)}(function(t,e){"use strict";function a(){var a={},r={Chart:e,getOptions:function(e){var r=e&&a[e]||{};return t.extend({},a,r)}};this.setOptions=function(e,r){return r?void(a[e]=t.extend(a[e]||{},r)):(r=e,void(a=t.extend(a,r)))},this.$get=function(){return r}}function r(a,r){function o(t,e){return t&&e&&t.length&&e.length?Array.isArray(t[0])?t.length===e.length&&t.every(function(t,a){return t.length===e[a].length}):e.reduce(i,0)>0?t.length===e.length:!1:!1}function i(t,e){return t+e}function u(e,a,r,n){var o=null;return function(i){var u=a.getPointsAtEvent||a.getBarsAtEvent||a.getSegmentsAtEvent;if(u){var l=u.call(a,i);(n===!1||t.equals(o,l)===!1)&&(o=l,e[r](l,i),e.$apply())}}}function l(r,n){for(var o=t.copy(n.colours||a.getOptions(r).colours||e.defaults.global.colours);o.length<n.data.length;)o.push(n.getColour());return o.map(c)}function c(t){return"object"==typeof t&&null!==t?t:"string"==typeof t&&"#"===t[0]?h(g(t.substr(1))):s()}function s(){var t=[f(0,255),f(0,255),f(0,255)];return h(t)}function h(t){return{fillColor:d(t,.2),strokeColor:d(t,1),pointColor:d(t,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:d(t,.8)}}function f(t,e){return Math.floor(Math.random()*(e-t+1))+t}function d(t,e){return n?"rgb("+t.join(",")+")":"rgba("+t.concat(e).join(",")+")"}function g(t){var e=parseInt(t,16),a=e>>16&255,r=e>>8&255,n=255&e;return[a,r,n]}function v(e,a,r,n,o,i){return{hasCumulativeData:e,previousPeriodData:a,labels:r,datasets:n.map(function(e,a){return t.extend({},i[a],{label:o[a],data:e})})}}function p(e,a,r,n,o){return r.map(function(r,i){return t.extend({},o[i],{hasCumulativeData:e,previousPeriodData:a,label:r,value:n[i],color:o[i].strokeColor,highlight:o[i].pointHighlightStroke})})}function C(t,e){var a=t.parent(),r=a.find("chart-legend"),n="<chart-legend>"+e.generateLegend()+"</chart-legend>";r.length?r.replaceWith(n):a.append(n)}function y(t,e,a,r){Array.isArray(a.data[0])?t.datasets.forEach(function(t,a){(t.points||t.bars).forEach(function(t,r){t.value=e[a][r]})}):t.segments.forEach(function(t,a){t.value=e[a]}),t.update(),a.$emit("update",t),a.legend&&"false"!==a.legend&&C(r,t)}function m(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function b(r,n){var o=t.extend({},e.defaults.global,a.getOptions(r),n.options);return o.responsive}return function(e){return{restrict:"CA",scope:{data:"=?",previousPeriodData:"=?",hasCumulativeValues:"=?",labels:"=?",options:"=?",series:"=?",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=?",hover:"=?",chartData:"=?",chartPreviousPeriodData:"=?",chartHasCumulativeValues:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColours:"=?",chartLegend:"@",chartClick:"=?",chartHover:"=?"},link:function(i,c){function h(t,e){i.$watch(t,function(t){"undefined"!=typeof t&&(i[e]=t)})}function f(a,r){if(!m(a)&&!t.equals(a,r)){var n=e||i.chartType;n&&(w&&w.destroy(),d(n))}}function d(e){if(b(e,i)&&0===c[0].clientHeight&&0===D.clientHeight)return r(function(){d(e)},50,!1);if(i.data&&i.data.length){i.getColour="function"==typeof i.getColour?i.getColour:s,i.colours=l(e,i);var n,o=c[0],h=o.getContext("2d");n=Array.isArray(i.data[0])?v(i.hasCumulativeData,i.previousPeriodData,i.labels,i.data,i.series||[],i.colours):p(i.hasCumulativeData,i.previousPeriodData,i.labels,i.data,i.colours);var f=t.extend({},a.getOptions(e),i.options);w=new a.Chart(h)[e](n,f),i.$emit("create",w),o.onclick=i.click?u(i,w,"click",!1):t.noop,o.onmousemove=i.hover?u(i,w,"hover",!0):t.noop,i.legend&&"false"!==i.legend&&C(c,w)}}function g(t){if("undefined"!=typeof console&&"test"!==a.getOptions().env){var e="function"==typeof console.warn?console.warn:console.log;i[t]&&e.call(console,'"%s" is deprecated and will be removed in a future version. Please use "chart-%s" instead.',t,t)}}var w,D=document.createElement("div");D.className="chart-container",c.replaceWith(D),D.appendChild(c[0]),n&&window.G_vmlCanvasManager.initElement(c[0]),["data","previousPeriodData","hasCumulativeValues","labels","options","series","colours","legend","click","hover"].forEach(g),h("chartData","data"),h("chartPreviousPeriodData","previousPeriodData"),h("chartHasCumulativeValues","hasCumulativeValues"),h("chartLabels","labels"),h("chartOptions","options"),h("chartSeries","series"),h("chartColours","colours"),h("chartLegend","legend"),h("chartClick","click"),h("chartHover","hover"),i.$watch("data",function(t,a){if(t&&t.length&&(!Array.isArray(t[0])||t[0].length)){var r=e||i.chartType;if(r){if(w){if(o(t,a))return y(w,t,i,c);w.destroy()}d(r)}}},!0),i.$watch("series",f,!0),i.$watch("labels",f,!0),i.$watch("previousPeriodData",f,!0),i.$watch("hasCumulativeValues",f,!0),i.$watch("options",f,!0),i.$watch("colours",f,!0),i.$watch("chartType",function(e,a){m(e)||t.equals(e,a)||(w&&w.destroy(),d(e))}),i.$on("$destroy",function(){w&&w.destroy()})}}}}e.defaults.global.responsive=!0,e.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",e.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var n="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return n&&(e.defaults.global.animation=!1),t.module("chart.js",[]).provider("ChartJs",a).factory("ChartJsFactory",["ChartJs","$timeout",r]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("Line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("Bar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("PolarArea")}])});
//# sourceMappingURL=angular-chart.min.js.map
